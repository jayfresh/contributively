<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Contributively - peer-reviewed contributions to projects</title>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"></script>
		<script type="text/javascript">
			var store = [];
			$(document).ready(function() {
				var saveToStore = function(name,live) {
					var addNameToList = function() {
						$('#nameList ul').prepend("<li>"+name+"</li>");
					};
					if(live) {
						var data = {
							name:name
						};
						var callback = function(data) {
							if(data.indexOf("added successfully")!==-1) {
								$('#nameList .ajax').remove();
								addNameToList();
							} else {
								$('#nameList .ajax').addClass('error').html(name+' not saved on server! Try again.</div>');
							}
						};
						$('#nameList').prepend('<div class="ajax">Sending...</div>');
						if(
							window.Components &&
							window.netscape &&
							window.netscape.security &&
							document.location.protocol.indexOf("http") == -1) {
						window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
						}
						$.post("http://contributively.appjet.net",data,callback,"html");
					} else {
						// mimicing behaviour in contributively.appjet.net
						for(var i=0;i<store.length;i++) {
							store[i].position++;
						}
						store.push({
							name:name,
							position:1
						});
						addNameToList();
					}
				};
				$('#nameForm .submit').click(function() {
					var name = $('#name').val();
					saveToStore(name);
					return false;
				});
			});
		</script>
	</head>
	<body>
		<div id="container">
			<div id="nameForm">
				<form action="/">
					<label for="name">Add name</label>
					<input id="name" type="text"></input>
					<input type="submit" class="submit" value="Add"></input>
				</form>
			</div>
			<div id="nameList">
				<table>
					<tr>
						<td>JONATHAN LISTER</td>
					</tr>
					<tr>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td>MADHU KHAMBERMEHTU</td>
					</tr>
					<tr>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td>JAMES</td>
					</tr>
					<tr>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td>DEAN</td>
					</tr>
				</table>
			</div>
		</div>
	</body>
</html>
